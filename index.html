<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>HTTP Header Values</title>
	<meta name="description" content="Documentation for HTTP Header Values">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">HTTP Header Values</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>HTTP Header Values</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#http-header-value-parser" id="http-header-value-parser" style="color: inherit; text-decoration: none;">
					<h1>HTTP Header Value Parser</h1>
				</a>
				<p><a href="https://www.npmjs.com/package/@hatsy/http-header-value"><img src="https://img.shields.io/npm/v/@hatsy/http-header-value.svg?logo=npm" alt="NPM"></a>
					<a href="https://github.com/hatsyjs/http-header-value/actions?query=workflow%3ABuild"><img src="https://github.com/hatsyjs/http-header-value/workflows/Build/badge.svg" alt="Build Status"></a>
					<a href="https://codecov.io/gh/hatsyjs/http-header-value"><img src="https://codecov.io/gh/hatsyjs/http-header-value/branch/master/graph/badge.svg" alt="codecov"></a>
					<a href="https://github.com/hatsyjs/http-header-value"><img src="https://img.shields.io/static/v1?logo=github&label=GitHub&message=project&color=informational" alt="GitHub Project"></a>
				<a href="https://hatsyjs.github.io/http-header-value/"><img src="https://img.shields.io/static/v1?logo=typescript&label=API&message=docs&color=informational" alt="API Documentation"></a></p>
				<p>Parse HTTP header value:</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000">, </span><span style="color: #001080">hthvParseCommented</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">contentType</span><span style="color: #000000">] = </span><span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;text/html;charset=utf-8&#039;</span><span style="color: #000000">);</span>
<span style="color: #001080">contentType</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;           </span><span style="color: #008000">// text/html</span>
<span style="color: #001080">contentType</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">charset</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">; </span><span style="color: #008000">// utf-8</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">product</span><span style="color: #000000">, </span><span style="color: #0070C1">sysInfo</span><span style="color: #000000">, </span><span style="color: #0070C1">platform</span><span style="color: #000000">, </span><span style="color: #0070C1">version</span><span style="color: #000000">] = </span>
<span style="color: #000000">    </span><span style="color: #795E26">hthvParseCommented</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0&#039;</span><span style="color: #000000">);</span>

<span style="color: #001080">product</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;        </span><span style="color: #008000">// Mozilla/5.0</span>
<span style="color: #001080">sysInfo</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;        </span><span style="color: #008000">// X11</span>
<span style="color: #001080">sysInfo</span><span style="color: #000000">.</span><span style="color: #001080">pl</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">v</span><span style="color: #000000">;  </span><span style="color: #008000">// Linux x86_64</span>
<span style="color: #001080">sysInfo</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">rv</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;   </span><span style="color: #008000">// 70.0</span>
<span style="color: #001080">platform</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;       </span><span style="color: #008000">// Gecko/20100101</span>
<span style="color: #001080">version</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;        </span><span style="color: #008000">// Firefox/70.0</span>
</code></pre>
				<a href="#supported-headers" id="supported-headers" style="color: inherit; text-decoration: none;">
					<h2>Supported Headers</h2>
				</a>
				<p><a href="https://github.com/hatsyjs/http-header-value/wiki/Supported-Headers">See the list of supported HTTP headers and parsers best suited for them</a></p>
				<a href="#hthvparser" id="hthvparser" style="color: inherit; text-decoration: none;">
					<h2>HthvParser</h2>
				</a>
				<p><code>HthvParser</code> is a signature of parser function for HTTP header value.</p>
				<p>The <code>httvParse()</code> function is parser with default configuration.</p>
				<p>The <code>newHthvParser()</code> function may be used to configure a custom parser. There are also several custom parsers available
				suitable to parse specific headers (<a href="#custom-parsers">see below</a>).</p>
				<p>The parser splits the header value string onto items of type <code>HthvItem</code>.</p>
				<p>The value of item is stored in its <code>v</code> property. While its <code>$</code> property contains a type of item, and may be one of:</p>
				<ul>
					<li><code>quoted-string</code>,</li>
					<li><code>tagged-string</code>,</li>
					<li><code>angle-bracketed-string</code>,</li>
					<li><code>date-time</code>,</li>
					<li><code>raw</code> (the default).</li>
				</ul>
				<a href="#multiple-items" id="multiple-items" style="color: inherit; text-decoration: none;">
					<h3>Multiple Items</h3>
				</a>
				<p>Header value may consist of multiple comma- or space- separated items:</p>
				<blockquote>
					<p><code>Allow</code>: <strong><code>GET, POST, HEAD</code></strong> <br><code>Authorization</code>: <strong><code>Basic YWxhZGRpbjpvcGVuc2VzYW1l</code></strong></p>
				</blockquote>
				<p>That&#39;s why the parser returns an array of items.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000">} </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;GET, POST, HEAD&#039;</span><span style="color: #000000">).</span><span style="color: #795E26">map</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">); </span><span style="color: #008000">// [&#039;GET&#039;, &#039;POST&#039;, &#039;HEAD&#039;]</span>
<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Basic YWxhZGRpbjpvcGVuc2VzYW1l&#039;</span><span style="color: #000000">).</span><span style="color: #795E26">map</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">); </span><span style="color: #008000">// [&#039;Basic&#039;, &#039;YWxhZGRpbjpvcGVuc2VzYW1l&#039;];</span>
</code></pre>
				<a href="#item-parameters" id="item-parameters" style="color: inherit; text-decoration: none;">
					<h3>Item Parameters</h3>
				</a>
				<p>Each item may have a semicolon-separated parameters. Each parameter may have a name. Parameter name should be a valid
				token, while its value is separated from the name by <code>=</code> sign, or by <code>:</code> sign within comments.</p>
				<blockquote>
					<p><code>Accept</code>: <strong><code>text/html, application/xhtml+xml, application/xml;q=0.9, image/webp, */*;q=0.8</code></strong> <br><code>User-Agent:</code> <strong><code>Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0</code></strong></p>
				</blockquote>
				<p>Parameters are available via the <code>p</code> property of <code>HthvItem</code> that contains a parameter map. And via <code>pl</code> property
				that contains an array of all parameters.</p>
				<p>Each parameter is represented as <code>HthvItem</code> too. Parameter name is available from its <code>n</code> property.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000">, </span><span style="color: #001080">hthvParseCommented</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;text/html, application/xhtml+xml, application/xml;q=0.9, image/webp, */*;q=0.8&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">map</span><span style="color: #000000">(({ </span><span style="color: #001080">v</span><span style="color: #000000">, </span><span style="color: #001080">p</span><span style="color: #000000">: { </span><span style="color: #001080">q</span><span style="color: #000000"> } }) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> ({ </span><span style="color: #001080">contentType:</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000">, </span><span style="color: #001080">weight:</span><span style="color: #000000"> </span><span style="color: #001080">q</span><span style="color: #000000"> ? </span><span style="color: #795E26">parseFloat</span><span style="color: #000000">(</span><span style="color: #001080">q</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">) : </span><span style="color: #098658">1.0</span><span style="color: #000000"> }));</span>
<span style="color: #008000">//  [</span>
<span style="color: #008000">//    { contentType: &#039;text/html&#039;, weight: 1 },</span>
<span style="color: #008000">//    { contentType: &#039;application/xhtml+xml&#039;, weight: 1 },</span>
<span style="color: #008000">//    { contentType: &#039;application/xml&#039;, weight: 0.9 },</span>
<span style="color: #008000">//    { contentType: &#039;image/webp&#039;, weight: 1 },</span>
<span style="color: #008000">//    { contentType: &#039;*/*&#039;, weight: 0.8 }</span>
<span style="color: #008000">//  ]</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> [, </span><span style="color: #0070C1">comment</span><span style="color: #000000">] = </span><span style="color: #795E26">hthvParseCommented</span><span style="color: #000000">(</span><span style="color: #A31515">`Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0`</span><span style="color: #000000">);</span>
<span style="color: #001080">comment</span><span style="color: #000000">.</span><span style="color: #001080">pl</span><span style="color: #000000">.</span><span style="color: #795E26">map</span><span style="color: #000000">(({ </span><span style="color: #001080">n</span><span style="color: #000000">, </span><span style="color: #001080">v</span><span style="color: #000000"> }) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">n</span><span style="color: #000000"> ? </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #001080">n</span><span style="color: #0000FF">}</span><span style="color: #A31515">=</span><span style="color: #0000FF">${</span><span style="color: #001080">v</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000"> : </span><span style="color: #001080">v</span><span style="color: #000000">); </span><span style="color: #008000">// [ &#039;Linux x86_64&#039;, &#039;rv=70.0&#039; ]</span>
</code></pre>
				<p>Item itself can be a name/value pair.</p>
				<blockquote>
					<p><code>Cookie</code>: <strong><code>PHPSESSID=298zf09hf012fh2</code></strong></p>
				</blockquote>
				<p>The parser correctly recognizes that.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;PHPSESSID=298zf09hf012fh2&#039;</span><span style="color: #000000">); </span><span style="color: #008000">// { n: &#039;PHPSESSID&#039;, v: &#039;298zf09hf012fh2&#039; }</span>
</code></pre>
				<a href="#quoted-string" id="quoted-string" style="color: inherit; text-decoration: none;">
					<h3>Quoted String</h3>
				</a>
				<p>Values can be enclosed into double quotes. This works both for item values and for parameters.</p>
				<blockquote>
					<p><code>Clear-Site-Data:</code> <strong><code>&quot;cache&quot;</code></strong> <br><code>Public-Key-Pins:</code> <strong><code>pin-sha256=&quot;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&quot;; max-age=5184000; includeSubDomains; report-uri=&quot;https://www.example.org/hpkp-report&quot;</code></strong></p>
				</blockquote>
				<p>The returned item contains the value unquoted and unescaped. The type of such item is <code>quoted-string</code>.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;&quot;cache&quot;&#039;</span><span style="color: #000000">)[</span><span style="color: #098658">0</span><span style="color: #000000">]; </span><span style="color: #008000">// { $: &#039;quoted-string&#039;, v: &#039;cache&#039; }</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">pin</span><span style="color: #000000">] = </span><span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span>
<span style="color: #000000">    </span><span style="color: #A31515">&#039;pin-sha256=&quot;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&quot;; &#039;</span>
<span style="color: #000000">    + </span><span style="color: #A31515">&#039;max-age=5184000; &#039;</span>
<span style="color: #000000">    + </span><span style="color: #A31515">&#039;includeSubDomains; &#039;</span>
<span style="color: #000000">    + </span><span style="color: #A31515">&#039;report-uri=&quot;https://www.example.org/hpkp-report&quot;&#039;</span>
<span style="color: #000000">);</span>
<span style="color: #001080">pin</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">;              </span><span style="color: #008000">// { $: &#039;quoted-string&#039;, n: &#039;pin-sha256&#039;, v: &#039;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&#039; }</span>
<span style="color: #001080">pin</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">[</span><span style="color: #A31515">&#039;report-url&#039;</span><span style="color: #000000">] </span><span style="color: #008000">// { $: &#039;quoted-string&#039;, n: &#039;report-uri&#039;, v: &#039;https://www.example.org/hpkp-report&#039; } </span>
</code></pre>
				<a href="#tagged-string" id="tagged-string" style="color: inherit; text-decoration: none;">
					<h3>Tagged String</h3>
				</a>
				<p>Some headers have special syntax that allows to prepend a quoted string with a tag:</p>
				<blockquote>
					<p><code>ETag:</code> <strong><code>W/&quot;0815&quot;</code></strong></p>
				</blockquote>
				<p>The parser recognizes such item value (but not the parameter ones!) as <code>HthvItem</code> with type <code>tagged-string</code>, and places
				the tag into its <code>t</code> property, and unquoted string - into its <code>v</code> property.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;W/&quot;0815&quot;&#039;</span><span style="color: #000000">)[</span><span style="color: #098658">0</span><span style="color: #000000">]; </span><span style="color: #008000">// { $: &#039;tagged-string&#039;, t: &#039;W/&#039;, v: &#039;0815&#039; }</span>
</code></pre>
				<a href="#angle-brackets" id="angle-brackets" style="color: inherit; text-decoration: none;">
					<h3>Angle brackets</h3>
				</a>
				<p>Some headers use angle brackets to enclose strings with special symbols. E.g. URLs:</p>
				<blockquote>
					<p><code>Link:</code> <strong><code>&lt;https://example.com/index.html?mode=preconnect&gt;; rel=&quot;preconnect&quot;</code></strong></p>
				</blockquote>
				<p>The parser recognizes such item or parameter value as <code>HthvItem</code> with type <code>angle-bracketed-string</code> and value without
				brackets. Escape sequences not supported inside angle brackets.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParse</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>
<span style="color: #795E26">hthvParse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;&lt;https://example.com/index.html?mode=preconnect&gt;; rel=&quot;preconnect&quot;&#039;</span><span style="color: #000000">);</span>
<span style="color: #008000">// [{ </span>
<span style="color: #008000">//   $: &#039;angle-bracketed-string&#039;,</span>
<span style="color: #008000">//   v: &#039;https://example.com/index.html?mode=preconnect&#039;,</span>
<span style="color: #008000">//   p: {</span>
<span style="color: #008000">//     rel: { $: &#039;raw&#039;, n: &#039;rel&#039;, v: &#039;preconnect&#039; }</span>
<span style="color: #008000">//   },</span>
<span style="color: #008000">//   pl: [{ $: &#039;raw&#039;, n: &#039;rel&#039;, v: &#039;preconnect&#039; }]</span>
<span style="color: #008000">// }]                                        </span>
<span style="color: #008000">//</span>
</code></pre>
				<a href="#custom-parsers" id="custom-parsers" style="color: inherit; text-decoration: none;">
					<h2>Custom Parsers</h2>
				</a>
				<p>There is no standard for HTTP header value syntax. So, there is no way to implement a parser suitable for all headers.</p>
				<p>The parser can be configured to understand different header formats. A <code>newHthvParser()</code> function can be used for that.
					Configuring it properly isn&#39;t a simple task. So, the package contains some preconfigured parsers in addition to default
				one.</p>
				<a href="#datetime" id="datetime" style="color: inherit; text-decoration: none;">
					<h3>Date/Time</h3>
				</a>
				<p>Date and time value has special format in headers.</p>
				<blockquote>
					<p><code>Date:</code> <strong><code>Wed, 21 Oct 2015 07:28:00 GMT</code></strong> <br><code>Set-Cookie:</code> <strong><code>id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT</code></strong></p>
				</blockquote>
				<p>Date/time parsing disabled by default. It can be enabled in a custom parser. Then it would recognize date/time values at
				top-level and as parameter values. It is typically enough to use an <code>hthvParseDT()</code> parser though.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParseDT</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParseDT</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Wed, 21 Oct 2015 07:28:00 GMT&#039;</span><span style="color: #000000">)[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">v</span><span style="color: #000000">; </span><span style="color: #008000">// { $: &#039;date-time&#039;, v: &#039;Wed, 21 Oct 2015 07:28:00 GMT&#039; }</span>

<span style="color: #795E26">hthvParseDT</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT&#039;</span><span style="color: #000000">)[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">Expires</span><span style="color: #000000">;</span>
<span style="color: #008000">// { $: &#039;date-time&#039;, n: &#039;Expires&#039;, v: &#039;Wed, 21 Oct 2015 07:28:00 GMT&#039; }</span>
</code></pre>
				<a href="#comments" id="comments" style="color: inherit; text-decoration: none;">
					<h3>Comments</h3>
				</a>
				<p>Some headers may contain comments enclosed in parentheses.</p>
				<blockquote>
					<p><code>User-Agent:</code> <strong><code>Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0</code></strong></p>
				</blockquote>
				<p>Comments parsing disabled by default. It can be enabled in a custom parser. Then it would recognize top-level comments.
				It is typically enough to use an <code>hthvParseCommented()</code> parser though.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParseCommented</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParseCommented</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">map</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000">.</span><span style="color: #001080">v</span><span style="color: #000000">); </span><span style="color: #008000">// [&#039;Mozilla/5.0&#039;, &#039;X11&#039;, &#039;Gecko/20100101&#039;, &#039;Firefox/70.0&#039;];</span>
</code></pre>
				<a href="#uris" id="uris" style="color: inherit; text-decoration: none;">
					<h3>URIs</h3>
				</a>
				<p>URLs may contain <code>,</code>, <code>;</code>, &#39;(&#39;, &#39;)&#39;, and <code>=</code> symbols, that treated specially by default.</p>
				<blockquote>
					<p><code>Location:</code> <strong><code>http://example.com/matrix;param=(value)?q=some</code></strong></p>
				</blockquote>
				<p>The <code>httpParseURIs()</code> parser may be used to parse such header values.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParseURIs</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParseURIs</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;http://example.com/matrix;param=(value)?q=some&#039;</span><span style="color: #000000">);</span>
<span style="color: #008000">// { $: &#039;raw&#039;, v: &#039;http://example.com/matrix;param=(value)?q=some&#039; };</span>
</code></pre>
				<a href="#cookies" id="cookies" style="color: inherit; text-decoration: none;">
					<h3>Cookies</h3>
				</a>
				<p>Cookies can be set in response by <code>Set-Cookie</code> header, and in request by <code>Cookie</code> one:</p>
				<blockquote>
					<p><code>Set-Cookie:</code> <strong><code>id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT, SESSIONID=fdkafretercvx</code></strong> <br><code>Cookie:</code> <strong><code>id=a3fWa; SESSIONID=fdkafretercvx</code></strong></p>
				</blockquote>
				<p>The <code>Set-Cookie</code> value can be parsed by <code>hthvParseDT()</code> parser (as it may contain a date/value). While the <code>Cookie</code>
				value contains cookies semicolon-separated. The <code>hthvParseSemiSep()</code> parser handles this.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvParseSemiSep</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvParseSemiSep</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;id=a3fWa; SESSIONID=fdkafretercvx&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">    .</span><span style="color: #795E26">reduce</span><span style="color: #000000">((</span><span style="color: #001080">map</span><span style="color: #000000">, { </span><span style="color: #001080">n</span><span style="color: #000000">, </span><span style="color: #001080">v</span><span style="color: #000000"> }) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> ({ ...</span><span style="color: #001080">map</span><span style="color: #000000">, </span><span style="color: #001080">[n]:</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> }), {});</span>
<span style="color: #008000">// {</span>
<span style="color: #008000">//   id: &#039;3fWa&#039;,</span>
<span style="color: #008000">//   SESSIONID: &#039;fdkafretercvx&#039;</span>
<span style="color: #008000">// }</span>
</code></pre>
				<a href="#directives" id="directives" style="color: inherit; text-decoration: none;">
					<h3>Directives</h3>
				</a>
				<p>Some headers contain directives. Directives are parameterized items using spaces instead of semicolons to delimit
				parameters. While semicolons and colons delimit items.</p>
				<blockquote>
					<p><code>Content-Security-Policy:</code> <strong><code>default-src &#39;self&#39; http://example.com; connect-src &#39;none&#39;</code></strong> <br><code>Via</code>: <strong><code>HTTP/1.1 GWA, 1.0 fred, 1.1 p.example.net</code></strong></p>
				</blockquote>
				<p>The <code>hthvParseDirectives()</code> parser supports this format.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvFlatten</span><span style="color: #000000">, </span><span style="color: #001080">hthvParseDirectives</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #001080">map</span><span style="color: #000000">: { </span><span style="color: #0070C1">defaultSrc</span><span style="color: #000000">, </span><span style="color: #0070C1">connectSrc</span><span style="color: #000000"> } } =</span>
<span style="color: #000000">    </span><span style="color: #795E26">hthvFlatten</span><span style="color: #000000">(</span><span style="color: #795E26">hthvParseDirectives</span><span style="color: #000000">(</span><span style="color: #A31515">`default-src &#039;self&#039; http://example.com; connect-src &#039;none&#039;`</span><span style="color: #000000">));</span>

<span style="color: #001080">defaultSrc</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">v</span><span style="color: #000000">; </span><span style="color: #008000">// &#039;self&#039;</span>
<span style="color: #001080">defaultSrc</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #001080">v</span><span style="color: #000000">; </span><span style="color: #008000">// http://example.com</span>
<span style="color: #001080">connectSrc</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #001080">v</span><span style="color: #000000">; </span><span style="color: #008000">// &#039;none&#039;</span>
</code></pre>
				<a href="#utilities" id="utilities" style="color: inherit; text-decoration: none;">
					<h2>Utilities</h2>
				</a>
				<a href="#hthvflatten" id="hthvflatten" style="color: inherit; text-decoration: none;">
					<h3>hthvFlatten()</h3>
				</a>
				<p>Flattens HTTP header value items by extracting their parameters.</p>
				<p>The result is an item collection containing original <code>items</code>, as well as their parameters.</p>
				<p>Recursively places <code>items</code> and their parameters to result map in their original order, and:</p>
				<ul>
					<li>prefers named items over unnamed ones,</li>
					<li>prefers original items over their parameters,</li>
					<li>prefers items added first.</li>
				</ul>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvFlatten</span><span style="color: #000000">, </span><span style="color: #001080">hthvParseSemiSep</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #795E26">hthvFlatten</span><span style="color: #000000">(</span><span style="color: #795E26">hthvParseSemiSep</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;id=a3fWa; SESSIONID=fdkafretercvx&#039;</span><span style="color: #000000">));</span>
<span style="color: #008000">// {</span>
<span style="color: #008000">//   list: [</span>
<span style="color: #008000">//     { $: &#039;raw&#039;, n: &#039;id&#039;, v: &#039;a3fWa&#039; },</span>
<span style="color: #008000">//     { $: &#039;raw&#039;, n: &#039;SESSIONID&#039;, v: &#039;fdkafretercvx&#039; },</span>
<span style="color: #008000">//   ],</span>
<span style="color: #008000">//   map: {</span>
<span style="color: #008000">//     id: { $: &#039;raw&#039;, n: &#039;id&#039;, v: &#039;a3fWa&#039; },</span>
<span style="color: #008000">//     SESSIONID: { $: &#039;raw&#039;, n: &#039;SESSIONID&#039;, v: &#039;fdkafretercvx&#039; },     </span>
<span style="color: #008000">//   },  </span>
<span style="color: #008000">// }</span>

</code></pre>
				<a href="#hthvescapeq" id="hthvescapeq" style="color: inherit; text-decoration: none;">
					<h3>hthvEscapeQ()</h3>
				</a>
				<p>Escapes a string to be included into <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">quoted-string</a> within HTTP header value.</p>
				<p>Replaces <code>\</code> with <code>\\</code>, and <code>&quot;</code> with <code>\&quot;</code>.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvExcapeQ</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">realm</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;Access to the &quot;Site&quot;&#039;</span><span style="color: #000000">;</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">wwwAuthenticate</span><span style="color: #000000"> = </span><span style="color: #A31515">`WWW-Authenticate: Basic realm=&quot;</span><span style="color: #0000FF">${</span><span style="color: #795E26">hthvExcapeQ</span><span style="color: #000000FF">(</span><span style="color: #001080">realm</span><span style="color: #000000FF">)</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot;`</span><span style="color: #000000">;</span>
<span style="color: #008000">// WWW-Authenticate: Basic realm=&quot;Access to the \&quot;Site\&quot;&quot;</span>
</code></pre>
				<a href="#hthvescapec" id="hthvescapec" style="color: inherit; text-decoration: none;">
					<h3>hthvEscapeC()</h3>
				</a>
				<p>Escapes a string to be included into <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">comment</a> withing HTTP header value.</p>
				<p>Replaces <code>\</code> with <code>\\</code>, <code>&quot;</code> with <code>\&quot;</code>, <code>(</code> with <code>\(</code>, and <code>)</code> with <code>\)</code>.</p>
				<p>According to <a href="https://tools.ietf.org/html/rfc7230">RFC7230</a> the sender should not escape a double quote in this case. However, it may be necessary
				to distinguish between raw double quote and nested <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">quoted-string</a>.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvExcapeC</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">comment</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;Custom (&quot;quoted&quot;) comment&#039;</span>
<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">customComment</span><span style="color: #000000"> = </span><span style="color: #A31515">`Custom-Comment: (</span><span style="color: #0000FF">${</span><span style="color: #795E26">hthvExcapeC</span><span style="color: #000000FF">(</span><span style="color: #001080">comment</span><span style="color: #000000FF">)</span><span style="color: #0000FF">}</span><span style="color: #A31515">)`</span><span style="color: #000000">;</span>
<span style="color: #008000">// Custom-Comment: (Custom \(\&quot;quoted\&quot;\) comment)</span>
</code></pre>
				<a href="#hthvquote" id="hthvquote" style="color: inherit; text-decoration: none;">
					<h3>hthvQuote()</h3>
				</a>
				<p>Conditionally encloses HTTP header value or its part into double quotes.</p>
				<p>Quotes will be added if delimiter or special character is present in input <code>string</code>, or the input <code>string</code> is empty.
				Escapes <code>&quot;</code> and <code>\</code> symbols.</p>
				<pre><code class="language-typescript"><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">hthvQuote</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;@hatsy/http-header-value&#039;</span><span style="color: #000000">;</span>

<span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">forwardedHeader</span><span style="color: #000000">(</span><span style="color: #001080">forIp</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`Forwarded: For=</span><span style="color: #0000FF">${</span><span style="color: #795E26">hthvQuote</span><span style="color: #000000FF">(</span><span style="color: #001080">forIp</span><span style="color: #000000FF">)</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span>
<span style="color: #000000">}</span>

<span style="color: #795E26">forwardedHeader</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;127.0.0.1&#039;</span><span style="color: #000000">);                </span><span style="color: #008000">// Forwarded: For=127.0.0.1</span>
<span style="color: #795E26">forwardedHeader</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;[2001:db8:cafe::17]:4711&#039;</span><span style="color: #000000">); </span><span style="color: #008000">// Forwarded: For=&quot;[2001:db8:cafe::17]:4711&quot;</span>
</code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Modules</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_hatsy_http_header_value.html">@hatsy/http-<wbr>header-<wbr>value</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_hatsy_http_header_value_headers.html">@hatsy/http-<wbr>header-<wbr>value/headers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/_hatsy_http_header_value_node.html">@hatsy/http-<wbr>header-<wbr>value/node</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>