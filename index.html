<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>HTTP Header Values</title>
	<meta name="description" content="Documentation for HTTP Header Values">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">HTTP Header Values</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1>HTTP Header Values</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#http-header-value-parser" id="http-header-value-parser" style="color: inherit; text-decoration: none;">
					<h1>HTTP Header Value Parser</h1>
				</a>
				<p><a href="https://www.npmjs.com/package/@hatsy/http-header-value"><img src="https://img.shields.io/npm/v/@hatsy/http-header-value.svg?logo=npm" alt="NPM"></a>
					<a href="https://github.com/hatsyjs/http-header-value/actions?query=workflow%3ABuild"><img src="https://github.com/hatsyjs/http-header-value/workflows/Build/badge.svg" alt="Build Status"></a>
					<a href="https://codecov.io/gh/hatsyjs/http-header-value"><img src="https://codecov.io/gh/hatsyjs/http-header-value/branch/master/graph/badge.svg" alt="codecov"></a>
					<a href="https://github.com/hatsyjs/http-header-value"><img src="https://img.shields.io/static/v1?logo=github&label=GitHub&message=project&color=informational" alt="GitHub Project"></a>
				<a href="https://hatsyjs.github.io/http-header-value/"><img src="https://img.shields.io/static/v1?logo=typescript&label=API&message=docs&color=informational" alt="API Documentation"></a></p>
				<p>Parse HTTP header value:</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse, hthvParseCommented } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

<span class="hljs-keyword">const</span> [contentType] = hthvParse(<span class="hljs-string">&#x27;text/html;charset=utf-8&#x27;</span>);
contentType.v;           <span class="hljs-comment">// text/html</span>
contentType.p.charset.v; <span class="hljs-comment">// utf-8</span>

<span class="hljs-keyword">const</span> [product, sysInfo, platform, version] = 
    hthvParseCommented(<span class="hljs-string">&#x27;Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0&#x27;</span>);

product.v;        <span class="hljs-comment">// Mozilla/5.0</span>
sysInfo.v;        <span class="hljs-comment">// X11</span>
sysInfo.pl[<span class="hljs-number">0</span>].v;  <span class="hljs-comment">// Linux x86_64</span>
sysInfo.p.rv.v;   <span class="hljs-comment">// 70.0</span>
platform.v;       <span class="hljs-comment">// Gecko/20100101</span>
version.v;        <span class="hljs-comment">// Firefox/70.0</span></code></pre>
				<a href="#supported-headers" id="supported-headers" style="color: inherit; text-decoration: none;">
					<h2>Supported Headers</h2>
				</a>
				<p><a href="https://github.com/hatsyjs/http-header-value/wiki/Supported-Headers">See the list of supported HTTP headers and parsers best suited for them</a></p>
				<a href="#hthvparser" id="hthvparser" style="color: inherit; text-decoration: none;">
					<h2>HthvParser</h2>
				</a>
				<p><code>HthvParser</code> is a signature of parser function for HTTP header value.</p>
				<p>The <code>httvParse()</code> function is parser with default configuration.</p>
				<p>The <code>newHthvParser()</code> function may be used to configure a custom parser. There are also several custom parsers available
				suitable to parse specific headers (<a href="#custom-parsers">see below</a>).</p>
				<p>The parser splits the header value string onto items of type <code>HthvItem</code>.</p>
				<p>The value of item is stored in its <code>v</code> property. While its <code>$</code> property contains a type of item, and may be one of:</p>
				<ul>
					<li><code>quoted-string</code>,</li>
					<li><code>tagged-string</code>,</li>
					<li><code>angle-bracketed-string</code>,</li>
					<li><code>date-time</code>,</li>
					<li><code>raw</code> (the default).</li>
				</ul>
				<a href="#multiple-items" id="multiple-items" style="color: inherit; text-decoration: none;">
					<h3>Multiple Items</h3>
				</a>
				<p>Header value may consist of multiple comma- or space- separated items:</p>
				<blockquote>
					<p><code>Allow</code>: <strong><code>GET, POST, HEAD</code></strong> <br><code>Authorization</code>: <strong><code>Basic YWxhZGRpbjpvcGVuc2VzYW1l</code></strong></p>
				</blockquote>
				<p>That&#39;s why the parser returns an array of items.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParse(<span class="hljs-string">&#x27;GET, POST, HEAD&#x27;</span>).map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.v); <span class="hljs-comment">// [&#x27;GET&#x27;, &#x27;POST&#x27;, &#x27;HEAD&#x27;]</span>
hthvParse(<span class="hljs-string">&#x27;Basic YWxhZGRpbjpvcGVuc2VzYW1l&#x27;</span>).map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.v); <span class="hljs-comment">// [&#x27;Basic&#x27;, &#x27;YWxhZGRpbjpvcGVuc2VzYW1l&#x27;];</span></code></pre>
				<a href="#item-parameters" id="item-parameters" style="color: inherit; text-decoration: none;">
					<h3>Item Parameters</h3>
				</a>
				<p>Each item may have a semicolon-separated parameters. Each parameter may have a name. Parameter name should be a valid
				token, while its value is separated from the name by <code>=</code> sign, or by <code>:</code> sign within comments.</p>
				<blockquote>
					<p><code>Accept</code>: <strong><code>text/html, application/xhtml+xml, application/xml;q=0.9, image/webp, */*;q=0.8</code></strong> <br><code>User-Agent:</code> <strong><code>Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0</code></strong></p>
				</blockquote>
				<p>Parameters are available via the <code>p</code> property of <code>HthvItem</code> that contains a parameter map. And via <code>pl</code> property
				that contains an array of all parameters.</p>
				<p>Each parameter is represented as <code>HthvItem</code> too. Parameter name is available from its <code>n</code> property.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse, hthvParseCommented } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParse(<span class="hljs-string">&#x27;text/html, application/xhtml+xml, application/xml;q=0.9, image/webp, */*;q=0.8&#x27;</span>)
    .map(<span class="hljs-function">(<span class="hljs-params">{ v, p: { q } }</span>) =&gt;</span> ({ contentType: v, weight: q ? <span class="hljs-built_in">parseFloat</span>(q.v) : <span class="hljs-number">1.0</span> }));
<span class="hljs-comment">//  [</span>
<span class="hljs-comment">//    { contentType: &#x27;text/html&#x27;, weight: 1 },</span>
<span class="hljs-comment">//    { contentType: &#x27;application/xhtml+xml&#x27;, weight: 1 },</span>
<span class="hljs-comment">//    { contentType: &#x27;application/xml&#x27;, weight: 0.9 },</span>
<span class="hljs-comment">//    { contentType: &#x27;image/webp&#x27;, weight: 1 },</span>
<span class="hljs-comment">//    { contentType: &#x27;*/*&#x27;, weight: 0.8 }</span>
<span class="hljs-comment">//  ]</span>

<span class="hljs-keyword">const</span> [, comment] = hthvParseCommented(<span class="hljs-string">`Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0`</span>);
comment.pl.map(<span class="hljs-function">(<span class="hljs-params">{ n, v }</span>) =&gt;</span> n ? <span class="hljs-string">`<span class="hljs-subst">${n}</span>=<span class="hljs-subst">${v}</span>`</span> : v); <span class="hljs-comment">// [ &#x27;Linux x86_64&#x27;, &#x27;rv=70.0&#x27; ]</span></code></pre>
				<p>Item itself can be a name/value pair.</p>
				<blockquote>
					<p><code>Cookie</code>: <strong><code>PHPSESSID=298zf09hf012fh2</code></strong></p>
				</blockquote>
				<p>The parser correctly recognizes that.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParse(<span class="hljs-string">&#x27;PHPSESSID=298zf09hf012fh2&#x27;</span>); <span class="hljs-comment">// { n: &#x27;PHPSESSID&#x27;, v: &#x27;298zf09hf012fh2&#x27; }</span></code></pre>
				<a href="#quoted-string" id="quoted-string" style="color: inherit; text-decoration: none;">
					<h3>Quoted String</h3>
				</a>
				<p>Values can be enclosed into double quotes. This works both for item values and for parameters.</p>
				<blockquote>
					<p><code>Clear-Site-Data:</code> <strong><code>&quot;cache&quot;</code></strong> <br><code>Public-Key-Pins:</code> <strong><code>pin-sha256=&quot;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&quot;; max-age=5184000; includeSubDomains; report-uri=&quot;https://www.example.org/hpkp-report&quot;</code></strong></p>
				</blockquote>
				<p>The returned item contains the value unquoted and unescaped. The type of such item is <code>quoted-string</code>.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParse(<span class="hljs-string">&#x27;&quot;cache&quot;&#x27;</span>)[<span class="hljs-number">0</span>]; <span class="hljs-comment">// { $: &#x27;quoted-string&#x27;, v: &#x27;cache&#x27; }</span>

<span class="hljs-keyword">const</span> [pin] = hthvParse(
    <span class="hljs-string">&#x27;pin-sha256=&quot;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&quot;; &#x27;</span>
    + <span class="hljs-string">&#x27;max-age=5184000; &#x27;</span>
    + <span class="hljs-string">&#x27;includeSubDomains; &#x27;</span>
    + <span class="hljs-string">&#x27;report-uri=&quot;https://www.example.org/hpkp-report&quot;&#x27;</span>
);
pin.v;              <span class="hljs-comment">// { $: &#x27;quoted-string&#x27;, n: &#x27;pin-sha256&#x27;, v: &#x27;M8HztCzM3elUxkcjR2S5P4hhyBNf6lHkmjAHKhpGPWE=&#x27; }</span>
pin.p[<span class="hljs-string">&#x27;report-url&#x27;</span>] <span class="hljs-comment">// { $: &#x27;quoted-string&#x27;, n: &#x27;report-uri&#x27;, v: &#x27;https://www.example.org/hpkp-report&#x27; } </span></code></pre>
				<a href="#tagged-string" id="tagged-string" style="color: inherit; text-decoration: none;">
					<h3>Tagged String</h3>
				</a>
				<p>Some headers have special syntax that allows to prepend a quoted string with a tag:</p>
				<blockquote>
					<p><code>ETag:</code> <strong><code>W/&quot;0815&quot;</code></strong></p>
				</blockquote>
				<p>The parser recognizes such item value (but not the parameter ones!) as <code>HthvItem</code> with type <code>tagged-string</code>, and places
				the tag into its <code>t</code> property, and unquoted string - into its <code>v</code> property.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParse(<span class="hljs-string">&#x27;W/&quot;0815&quot;&#x27;</span>)[<span class="hljs-number">0</span>]; <span class="hljs-comment">// { $: &#x27;tagged-string&#x27;, t: &#x27;W/&#x27;, v: &#x27;0815&#x27; }</span></code></pre>
				<a href="#angle-brackets" id="angle-brackets" style="color: inherit; text-decoration: none;">
					<h3>Angle brackets</h3>
				</a>
				<p>Some headers use angle brackets to enclose strings with special symbols. E.g. URLs:</p>
				<blockquote>
					<p><code>Link:</code> <strong><code>&lt;https://example.com/index.html?mode=preconnect&gt;; rel=&quot;preconnect&quot;</code></strong></p>
				</blockquote>
				<p>The parser recognizes such item or parameter value as <code>HthvItem</code> with type <code>angle-bracketed-string</code> and value without
				brackets. Escape sequences not supported inside angle brackets.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParse } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;
hthvParse(<span class="hljs-string">&#x27;&lt;https://example.com/index.html?mode=preconnect&gt;; rel=&quot;preconnect&quot;&#x27;</span>);
<span class="hljs-comment">// [{ </span>
<span class="hljs-comment">//   $: &#x27;angle-bracketed-string&#x27;,</span>
<span class="hljs-comment">//   v: &#x27;https://example.com/index.html?mode=preconnect&#x27;,</span>
<span class="hljs-comment">//   p: {</span>
<span class="hljs-comment">//     rel: { $: &#x27;raw&#x27;, n: &#x27;rel&#x27;, v: &#x27;preconnect&#x27; }</span>
<span class="hljs-comment">//   },</span>
<span class="hljs-comment">//   pl: [{ $: &#x27;raw&#x27;, n: &#x27;rel&#x27;, v: &#x27;preconnect&#x27; }]</span>
<span class="hljs-comment">// }]                                        </span>
<span class="hljs-comment">//</span></code></pre>
				<a href="#custom-parsers" id="custom-parsers" style="color: inherit; text-decoration: none;">
					<h2>Custom Parsers</h2>
				</a>
				<p>There is no standard for HTTP header value syntax. So, there is no way to implement a parser suitable for all headers.</p>
				<p>The parser can be configured to understand different header formats. A <code>newHthvParser()</code> function can be used for that.
					Configuring it properly isn&#39;t a simple task. So, the package contains some preconfigured parsers in addition to default
				one.</p>
				<a href="#datetime" id="datetime" style="color: inherit; text-decoration: none;">
					<h3>Date/Time</h3>
				</a>
				<p>Date and time value has special format in headers.</p>
				<blockquote>
					<p><code>Date:</code> <strong><code>Wed, 21 Oct 2015 07:28:00 GMT</code></strong> <br><code>Set-Cookie:</code> <strong><code>id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT</code></strong></p>
				</blockquote>
				<p>Date/time parsing disabled by default. It can be enabled in a custom parser. Then it would recognize date/time values at
				top-level and as parameter values. It is typically enough to use an <code>hthvParseDT()</code> parser though.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParseDT } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParseDT(<span class="hljs-string">&#x27;Wed, 21 Oct 2015 07:28:00 GMT&#x27;</span>)[<span class="hljs-number">0</span>].v; <span class="hljs-comment">// { $: &#x27;date-time&#x27;, v: &#x27;Wed, 21 Oct 2015 07:28:00 GMT&#x27; }</span>

hthvParseDT(<span class="hljs-string">&#x27;id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT&#x27;</span>)[<span class="hljs-number">0</span>].p.Expires;
<span class="hljs-comment">// { $: &#x27;date-time&#x27;, n: &#x27;Expires&#x27;, v: &#x27;Wed, 21 Oct 2015 07:28:00 GMT&#x27; }</span></code></pre>
				<a href="#comments" id="comments" style="color: inherit; text-decoration: none;">
					<h3>Comments</h3>
				</a>
				<p>Some headers may contain comments enclosed in parentheses.</p>
				<blockquote>
					<p><code>User-Agent:</code> <strong><code>Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0</code></strong></p>
				</blockquote>
				<p>Comments parsing disabled by default. It can be enabled in a custom parser. Then it would recognize top-level comments.
				It is typically enough to use an <code>hthvParseCommented()</code> parser though.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParseCommented } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParseCommented(<span class="hljs-string">&#x27;Mozilla/5.0 (X11; Linux x86_64; rv:70.0) Gecko/20100101 Firefox/70.0&#x27;</span>)
    .map(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.v); <span class="hljs-comment">// [&#x27;Mozilla/5.0&#x27;, &#x27;X11&#x27;, &#x27;Gecko/20100101&#x27;, &#x27;Firefox/70.0&#x27;];</span></code></pre>
				<a href="#uris" id="uris" style="color: inherit; text-decoration: none;">
					<h3>URIs</h3>
				</a>
				<p>URLs may contain <code>,</code>, <code>;</code>, &#39;(&#39;, &#39;)&#39;, and <code>=</code> symbols, that treated specially by default.</p>
				<blockquote>
					<p><code>Location:</code> <strong><code>http://example.com/matrix;param=(value)?q=some</code></strong></p>
				</blockquote>
				<p>The <code>httpParseURIs()</code> parser may be used to parse such header values.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParseURIs } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParseURIs(<span class="hljs-string">&#x27;http://example.com/matrix;param=(value)?q=some&#x27;</span>);
<span class="hljs-comment">// { $: &#x27;raw&#x27;, v: &#x27;http://example.com/matrix;param=(value)?q=some&#x27; };</span></code></pre>
				<a href="#cookies" id="cookies" style="color: inherit; text-decoration: none;">
					<h3>Cookies</h3>
				</a>
				<p>Cookies can be set in response by <code>Set-Cookie</code> header, and in request by <code>Cookie</code> one:</p>
				<blockquote>
					<p><code>Set-Cookie:</code> <strong><code>id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT, SESSIONID=fdkafretercvx</code></strong> <br><code>Cookie:</code> <strong><code>id=a3fWa; SESSIONID=fdkafretercvx</code></strong></p>
				</blockquote>
				<p>The <code>Set-Cookie</code> value can be parsed by <code>hthvParseDT()</code> parser (as it may contain a date/value). While the <code>Cookie</code>
				value contains cookies semicolon-separated. The <code>hthvParseSemiSep()</code> parser handles this.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvParseSemiSep } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvParseSemiSep(<span class="hljs-string">&#x27;id=a3fWa; SESSIONID=fdkafretercvx&#x27;</span>)
    .reduce(<span class="hljs-function">(<span class="hljs-params">map, { n, v }</span>) =&gt;</span> ({ ...map, [n]: v }), {});
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   id: &#x27;3fWa&#x27;,</span>
<span class="hljs-comment">//   SESSIONID: &#x27;fdkafretercvx&#x27;</span>
<span class="hljs-comment">// }</span></code></pre>
				<a href="#directives" id="directives" style="color: inherit; text-decoration: none;">
					<h3>Directives</h3>
				</a>
				<p>Some headers contain directives. Directives are parameterized items using spaces instead of semicolons to delimit
				parameters. While semicolons and colons delimit items.</p>
				<blockquote>
					<p><code>Content-Security-Policy:</code> <strong><code>default-src &#39;self&#39; http://example.com; connect-src &#39;none&#39;</code></strong> <br><code>Via</code>: <strong><code>HTTP/1.1 GWA, 1.0 fred, 1.1 p.example.net</code></strong></p>
				</blockquote>
				<p>The <code>hthvParseDirectives()</code> parser supports this format.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvFlatten, hthvParseDirectives } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

<span class="hljs-keyword">const</span> { map: { defaultSrc, connectSrc } } =
    hthvFlatten(hthvParseDirectives(<span class="hljs-string">`default-src &#x27;self&#x27; http://example.com; connect-src &#x27;none&#x27;`</span>));

defaultSrc.p[<span class="hljs-number">0</span>].v; <span class="hljs-comment">// &#x27;self&#x27;</span>
defaultSrc.p[<span class="hljs-number">1</span>].v; <span class="hljs-comment">// http://example.com</span>
connectSrc.p[<span class="hljs-number">0</span>].v; <span class="hljs-comment">// &#x27;none&#x27;</span></code></pre>
				<a href="#utilities" id="utilities" style="color: inherit; text-decoration: none;">
					<h2>Utilities</h2>
				</a>
				<a href="#hthvflatten" id="hthvflatten" style="color: inherit; text-decoration: none;">
					<h3>hthvFlatten()</h3>
				</a>
				<p>Flattens HTTP header value items by extracting their parameters.</p>
				<p>The result is an item collection containing original <code>items</code>, as well as their parameters.</p>
				<p>Recursively places <code>items</code> and their parameters to result map in their original order, and:</p>
				<ul>
					<li>prefers named items over unnamed ones,</li>
					<li>prefers original items over their parameters,</li>
					<li>prefers items added first.</li>
				</ul>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvFlatten, hthvParseSemiSep } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

hthvFlatten(hthvParseSemiSep(<span class="hljs-string">&#x27;id=a3fWa; SESSIONID=fdkafretercvx&#x27;</span>));
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   list: [</span>
<span class="hljs-comment">//     { $: &#x27;raw&#x27;, n: &#x27;id&#x27;, v: &#x27;a3fWa&#x27; },</span>
<span class="hljs-comment">//     { $: &#x27;raw&#x27;, n: &#x27;SESSIONID&#x27;, v: &#x27;fdkafretercvx&#x27; },</span>
<span class="hljs-comment">//   ],</span>
<span class="hljs-comment">//   map: {</span>
<span class="hljs-comment">//     id: { $: &#x27;raw&#x27;, n: &#x27;id&#x27;, v: &#x27;a3fWa&#x27; },</span>
<span class="hljs-comment">//     SESSIONID: { $: &#x27;raw&#x27;, n: &#x27;SESSIONID&#x27;, v: &#x27;fdkafretercvx&#x27; },     </span>
<span class="hljs-comment">//   },  </span>
<span class="hljs-comment">// }</span>
</code></pre>
				<a href="#hthvescapeq" id="hthvescapeq" style="color: inherit; text-decoration: none;">
					<h3>hthvEscapeQ()</h3>
				</a>
				<p>Escapes a string to be included into <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">quoted-string</a> within HTTP header value.</p>
				<p>Replaces <code>\</code> with <code>\\</code>, and <code>&quot;</code> with <code>\&quot;</code>.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvExcapeQ } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

<span class="hljs-keyword">const</span> realm = <span class="hljs-string">&#x27;Access to the &quot;Site&quot;&#x27;</span>;
<span class="hljs-keyword">const</span> wwwAuthenticate = <span class="hljs-string">`WWW-Authenticate: Basic realm=&quot;<span class="hljs-subst">${hthvExcapeQ(realm)}</span>&quot;`</span>;
<span class="hljs-comment">// WWW-Authenticate: Basic realm=&quot;Access to the \&quot;Site\&quot;&quot;</span></code></pre>
				<a href="#hthvescapec" id="hthvescapec" style="color: inherit; text-decoration: none;">
					<h3>hthvEscapeC()</h3>
				</a>
				<p>Escapes a string to be included into <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">comment</a> withing HTTP header value.</p>
				<p>Replaces <code>\</code> with <code>\\</code>, <code>&quot;</code> with <code>\&quot;</code>, <code>(</code> with <code>\(</code>, and <code>)</code> with <code>\)</code>.</p>
				<p>According to <a href="https://tools.ietf.org/html/rfc7230">RFC7230</a> the sender should not escape a double quote in this case. However, it may be necessary
				to distinguish between raw double quote and nested <a href="https://tools.ietf.org/html/rfc7230#section-3.2.6">quoted-string</a>.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvExcapeC } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

<span class="hljs-keyword">const</span> comment = <span class="hljs-string">&#x27;Custom (&quot;quoted&quot;) comment&#x27;</span>
<span class="hljs-keyword">const</span> customComment = <span class="hljs-string">`Custom-Comment: (<span class="hljs-subst">${hthvExcapeC(comment)}</span>)`</span>;
<span class="hljs-comment">// Custom-Comment: (Custom \(\&quot;quoted\&quot;\) comment)</span></code></pre>
				<a href="#hthvquote" id="hthvquote" style="color: inherit; text-decoration: none;">
					<h3>hthvQuote()</h3>
				</a>
				<p>Conditionally encloses HTTP header value or its part into double quotes.</p>
				<p>Quotes will be added if delimiter or special character is present in input <code>string</code>, or the input <code>string</code> is empty.
				Escapes <code>&quot;</code> and <code>\</code> symbols.</p>
				<pre><code class="language-typescript"><span class="hljs-keyword">import</span> { hthvQuote } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@hatsy/http-header-value&#x27;</span>;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forwardedHeader</span>(<span class="hljs-params">forIp: <span class="hljs-built_in">string</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Forwarded: For=<span class="hljs-subst">${hthvQuote(forIp)}</span>`</span>
}

forwardedHeader(<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>);                <span class="hljs-comment">// Forwarded: For=127.0.0.1</span>
forwardedHeader(<span class="hljs-string">&#x27;[2001:db8:cafe::17]:4711&#x27;</span>); <span class="hljs-comment">// Forwarded: For=&quot;[2001:db8:cafe::17]:4711&quot;</span></code></pre>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/@hatsy_http-header-value.html">@hatsy/http-<wbr>header-<wbr>value</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/@hatsy_http-header-value_headers.html">@hatsy/http-<wbr>header-<wbr>value/headers</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/@hatsy_http-header-value_node.html">@hatsy/http-<wbr>header-<wbr>value/node</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>